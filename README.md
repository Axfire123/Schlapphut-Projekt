# Schlapphut-Projekt
Beim Schlapphut-Projekt handelt es sich um einen selbst gebauten GPS-Tracker mit WLAN Funktion für das Auto. Zielsetzung des Projekt ist dabei, alle Bewegungen eines Autos zu erfassen, diese zu Dokumentieren und auswerten zu können. Das Bewegungsprofil des Autonutzers wird quasi ausspioniert, wodurch sich der Name des Projekts ableiten lässt. Ein Detektiv oder Spion ist auf den Autonutzer angesetzt. Umgangssprachlich ein Schlapphut. Natürlich dürfen nur die eigenden Bewegungsdaten erfasst werden!
Das Projekt besteht dabei aus drei Komponenten: Die erste Komponente stellt dabei die Schlapphut-Hardware da, welche im Auto platziert wird. Komponente zwei ist eine Android-App, welche zum Datenaustausch mit der Hardware verwendet wird. Die letzte Komponente ist auf einem Windows-PC anzutreffen. Das selbst entwickelte Programm „KmlConverter“ konvertiert eine eingehende SLP-Datei in eine KML-Datei, welche anschließend mit der Software „Google-Earth“ geöffnet und angezeigt werden kann.

## Schlapphut-Hardware
Die Hardware des Schlapphuts wird im zu überwachenden Auto platziert. Als Stromversorgung wird die ungeschaltete Batteriespannung (Ausgangsspannung der Lichtmaschine) genutzt. Über eine Analyse der verschiedenen Spannungslevel der Lichtmaschine wird gleichzeitig detektiert, ob das Auto gerade in Betrieb ist (ob es fährt) oder ob es steht. Die Schlapphut-Hardware ist in einem Gehäuse für ODB-Analysegeräte verbaut, sodass die Hardware über diese Schnittstelle betrieben werden kann. Alternativ, kann die Hardware auch im Sicherungskasten des Autos verbaut werden. Dabei wird über eine Sicherung mittels Stromdieb die Batteriespannung angezapft, die Metallfassung des Sicherungskasten, sprich die Fahrzeugkarosserie, dient als Masse.  
Herzstück der Schlapphut-Hardware ist ein ESP8266 Mikrocontroller. Detektiert der Controller das Losfahren des Autos, schaltet dieser ein angeschlossenes GPS-Modul ein. Das Modul liefert Positionsdaten mit Datum und Uhrzeit, welche vom Mikrocontroller eingelesen und verarbeitet werden. Anschließend werden die Daten in Form einer SLP-Datei, ein von mir erfundenes Dateiformat, auf eine angeschlossene SD-Karte gespeichert. 
So speichert der Mikrocontroller bei jeder Autofahrt sekündlich die Positionsdaten ab und erstellt somit die Grundlage für ein Bewegungsprofil des Autofahrers. Um die Daten auf der SD-Karte zur weiteren Verarbeitung in die Außenwelt übertragen zu können, stellt der Mikrocontroller über einen Access-Point ein eigenes WLAN-Netz mit versteckter SSID bereit.

## Schlapphut-Android-App
Die entwickelte Android-App hat die Aufgabe ausgewählte SLP-Dateien von der Schlapphut-Hardware herunterzuladen. Außerdem können einige Aufzeichnungsparameter eingestellt werden. Nach dem Starten der App verbindet diese das Smartphone mit dem vom ESP8266 Mikrocontroller erzeugten WLAN-Netz und lädt die Daten über das TCP-Protokoll auf den internen Handyspeicher. So können die Daten problemlos auf das Smartphone runtergeladen werden. Anschließend werden die SLP-Dateien über Dropbox, E-Mail, USB oder Ähnlichem  auf einen Windows-PC zur weiteren Verarbeitung übertragen. Auf eine mögliche Verarbeitung direkt in der Android-App habe ich bewusst verzichtet, da ich eine Dateiverwaltung und eine gute Übersicht der Daten auf dem Handy zu unübersichtlich finde. Stichwort kleine Displaygröße und unübersichtlicher Dateiexplorer.

## Der KmlConverter
Die Konsolenanwendung KmlConverter wandelt eine SLP-Datei in eine KML-Datei um, damit diese anschließend von Google-Earth geöffnet und zur Anzeige gebracht werden kann. Die KML-Datei ist das Wunschformat von Google-Earth. Theoretisch hätte das Konvertieren der SLP-Datei nach KML schon in der Android-App implementiert werden können. In Zukunft soll jedoch der KmlConverter zu einem größeren Auswertungsprogramm umgebaut werden. Die Anzeige in Google-Earth stellt bisher auch eher eine Übergangslösung dar.

## Google Earth
Die mit dem KmlConverter erstellte KML-Datei wird mittels Google-Earth geöffnet. Hier werden nun alle Fahrten des Autos in sogenannten Tracks mit Datumstempel dargestellt.
